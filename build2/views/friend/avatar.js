define("webapp/views/friend/avatar.js",["webapp/common/baseview","text!webapp/templates/friend/avatar.html","webapp/common/app","webapp/stores/stores"],function(require){var t=require("webapp/common/baseview"),e=require("text!webapp/templates/friend/avatar.html"),a=(require("webapp/common/app"),require("webapp/stores/stores")),r=(a.UserStore.getInstance(),a.UserEditStore.createLazyFun());return t.extend({onCreate:function(){this.el.html(e)},events:{"click .topage":"toPage","click .imgbox img":"selectAvatar"},toPage:function(){this.forward("createqr")},selectAvatar:function(t){var e=$(t.currentTarget);r().setAttr("picUrl",e[0].src),r().setAttr("isSelectPic",!0);var a=this.$Q("from");this.back("friend/edit?uid="+this.$Q("uid")+(a?"&from="+a:""))},onLoad:function(){this.setHeader({title:"给TA一个身份",leftHandle:function(){var t=this.$Q("from");this.back("friend/edit?uid="+this.$Q("uid")+(t?"&from="+t:""))},hideRightBtn:!0});var t=r().getAttr("picUrl");if(t){var e=this.$("img");e.each(function(){var e=$(this);this.src===t?e.parent().addClass("cur"):e.parent().removeClass("cur")})}this.turning()},onShow:function(){},onHide:function(){}})});