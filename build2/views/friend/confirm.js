define("webapp/views/friend/confirm.js",["webapp/common/baseview","text!webapp/templates/friend/confirm.html","webapp/common/app","webapp/stores/stores","webapp/models/models"],function(require){var e=require("webapp/common/baseview"),t=require("text!webapp/templates/friend/confirm.html"),i=require("webapp/common/app"),n=require("webapp/stores/stores"),s=require("webapp/models/models"),o=(n.UserStore.getInstance(),s.UserInfoModel.createLazyFun(),s.MasterInfoModel.createLazyFun()),a=s.MyFriendUserInfoModel.createLazyFun();return e.extend({onCreate:function(){this.el.html(t),this.el_body=this.$(".js-body"),this.tpl_body=_.template(this.$("#tpl-body").html())},events:{"click .topage":"toPage","click .js-play-to-her":"playtoHer","click .js-listener-her":"listenerHer"},playtoHer:function(){i.backApp()},listenerHer:function(){this.showLoading(),this.getUid(function(e){var t=o(),i=this.$Q("uid");t.setParam("masterid",i),t.setParam("listenerId",e._id),t.request({success:function(e){var t=e.data&&e.data.action;this.forward(1===t||3===t?"listener/play?masterid="+i:"home")},error:function(){this.showToast("小天有点忙，退出再重新进入~",3)},complete:function(){this.hideLoading()}},this)})},toPage:function(){this.forward("createqr")},onLoad:function(){this.setHeader({title:"我的好友",leftHandle:function(){this.back("friend/list")},hideRightBtn:!0}),this.updateUserPanl(),this.turning()},updateUserPanl:function(){this.showLoading();var e=this.$Q("uid");this.getUid(function(t){var i=a();i.setParam("uid",t._id),i.setParam("friendid",e),i.request({success:function(e){this.el_body.html(this.tpl_body(e))},error:function(){this.showToast("小天有点忙，退出再重新进入~")},complete:function(){this.hideLoading()}},this)})},onShow:function(){},onHide:function(){}})});